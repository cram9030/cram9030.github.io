<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title }} - {% endif %}Nick Cramer</title>
    <link rel="stylesheet" href="/assets/css/main.css">
</head>
<body>
    <header class="site-header">
        <div class="container">
            <nav class="main-nav">
                <a href="/" class="site-title">Home</a>
                <div class="nav-links">
                    <a href="/projects">Projects</a>
                    <a href="/volunteering">Volunteering & Professional Activities</a>
                    <a href="/blog">Blog</a>
                    <a href="/tools">Tools</a>
                </div>
            </nav>
        </div>
    </header>

    <main class="site-content">
        <div class="container">
            <!-- Add automatic title display with conditional logic -->
            {% if page.show_title != false and page.title %}
                <h1 class="project-title">{{ page.title }}</h1>
            {% endif %}
            
            {{ content }}
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <div class="social-links">
                <a href="https://www.linkedin.com/in/nick-cramer-phd-87a9232b/">LinkedIn</a>
                <a href="https://scholar.google.com/citations?user=zzz5PzQAAAAJ">Google Scholar</a>
            </div>
        </div>
    </footer>
</body>
    <!-- MathJax 3 Configuration -->
    <script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']],
            processEscapes: true,
            processEnvironments: true
        },
        options: {
            skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
        }
    };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Mermaid.js -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            },
            securityLevel: 'loose'
        });
        
        // Add click handler for diagram elements
        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'path' || e.target.tagName === 'tspan' || 
                e.target.tagName === 'rect' || e.target.tagName === 'polygon') {
                // Find the closest parent mermaid div
                let parent = e.target;
                while (parent && !parent.classList.contains('mermaid')) {
                    parent = parent.parentElement;
                }
                
                if (parent) {
                    // Toggle fullscreen mode
                    if (!document.fullscreenElement) {
                        if (parent.requestFullscreen) {
                            parent.requestFullscreen();
                        } else if (parent.webkitRequestFullscreen) {
                            parent.webkitRequestFullscreen();
                        } else if (parent.msRequestFullscreen) {
                            parent.msRequestFullscreen();
                        }
                    } else {
                        if (document.exitFullscreen) {
                            document.exitFullscreen();
                        } else if (document.webkitExitFullscreen) {
                            document.webkitExitFullscreen();
                        } else if (document.msExitFullscreen) {
                            document.msExitFullscreen();
                        }
                    }
                }
            }
        });
    });
    </script>            
    </body>
</html>